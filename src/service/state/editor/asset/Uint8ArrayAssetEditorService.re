let buildBasicSourceTextureImageUint8ArrayMap = editorState =>
  TextureNodeAssetEditorService.findAllBasicSourceTypeTextureNodes(editorState)
  |> WonderCommonlib.ArrayService.reduceOneParam(
       (. map, textureNode) => {
         let {textureComponent, imageDataIndex}: NodeAssetType.textureNodeData =
           TextureNodeAssetService.getNodeData(textureNode);

         let {uint8Array, mimeType}: ImageDataType.imageData =
           BasicSourceTextureImageDataMapAssetEditorService.unsafeGetData(
             imageDataIndex,
             editorState,
           );

         uint8Array
         |> OptionService.andThenWithDefault(
              uint8Array =>
                map
                |> WonderCommonlib.ImmutableSparseMapService.set(
                     textureComponent,
                     (mimeType, uint8Array),
                   ),
              map,
            );
       },
       WonderCommonlib.ImmutableSparseMapService.createEmpty(),
     );